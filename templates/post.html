{% extends "base.html" %}
{% from "_macros.html" import make_arrows, make_post, make_comment %}
{% set active_page = "post" %}
{% set page_title = post.title %}
{% block body_w_flash %}

<!-- Top level post -->
{{ make_post(post, current_user) }}
<hr>
<!-- Comments -->
{% for comment in comments recursive %}
  <div class="{% if comment.depth is odd %}comment-odd {% else %}comment-even {% endif %} well well-sm">
    {{ make_comment(comment, current_user) }}
    {% if comment.children %}
    {% set _ = comment.children.sort(key=sort_comments, reverse=True) %}
    {{ loop(comment.children) }}
    {% endif %}
  </div>
{% endfor %}

<div class="col-md-6">
  <form method="POST" id="comment-form" action="" role="form" class="" _lpchecked="1" data-parent="">
    <div class="form-group">
      <textarea class="form-control" id="contents" name="contents"></textarea>
    </div>
    <div class="form-group ">
      <button class="btn btn-primary" name="submit" type="button">Post</button>
    </div>
  </form>
</div>
<script>var post_id = {{ post.id }};</script>
<script src="/static/js/vote_script.js"></script>
<script src="/static/js/comment.js"></script>
{% endblock %}
